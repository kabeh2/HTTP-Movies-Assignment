(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{183:function(e,t,a){e.exports=a(339)},187:function(e,t,a){},339:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=(a(187),a(76)),l=a(77),s=a(33),m=a(21),u=a(379),d=a(375),v=a(377),p=a(378),E=a(340),h=a(161),f=a(165),b=a.n(f),g=a(69),y=a.n(g),x=a(163),j=a.n(x),M=Object(h.a)((function(e){return{root:{flexGrow:1,color:"white"},menuButton:{marginRight:e.spacing(2)},toolbar:{alignItems:"flex-center",paddingTop:e.spacing(1),paddingBottom:e.spacing(2)},title:{flexGrow:1,color:"white",borderColor:"white"}}})),O=function(e){var t=M();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(v.a,{className:t.toolbar},r.a.createElement(p.a,{edge:"start",color:"inherit","aria-label":"open drawer"},r.a.createElement(j.a,null)),r.a.createElement(E.a,{className:t.title,variant:"h5",noWrap:!0},"Saved Movies:"),e.list.map((function(e){return r.a.createElement(m.c,{to:"/movies/".concat(e.id),key:e.id,activeClassName:"saved-active"},r.a.createElement(u.a,{className:t.title,variant:"outlined"},e.title))})),r.a.createElement(m.b,{to:"/add-movie"},r.a.createElement(p.a,{"aria-label":"add",className:t.root},r.a.createElement(y.a,null))),r.a.createElement(m.b,{to:"/"},r.a.createElement(p.a,{"aria-label":"home",edge:"end",className:t.root},r.a.createElement(b.a,null)))))))},k=a(70),w=a(71),N=a(79),A=a(73),C=a(72),S=a(78),D=a(32),T=a.n(D),q=a(380),R=a(381),B=function(e){var t=e.movie,a=t.title,n=t.director,c=t.metascore,o=t.stars;return r.a.createElement("div",{className:"movie-card"},r.a.createElement("h2",null,a),r.a.createElement("div",{className:"movie-director"},"Director: ",r.a.createElement("em",null,n)),r.a.createElement("div",{className:"movie-metascore"},"Metascore: ",r.a.createElement("strong",null,c)),r.a.createElement("h3",null,"Actors"),o.map((function(e){return r.a.createElement("div",{key:e,className:"movie-star"},e)})))},F=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(N.a)(this,Object(A.a)(t).call(this,e))).state={movies:[]},a.fetchData=a.fetchData.bind(Object(C.a)(a)),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;T.a.get("http://localhost:5000/api/movies").then((function(t){return e.setState({movies:t.data})})).catch((function(e){return console.log(e.response)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,null),r.a.createElement(R.a,{maxWidth:"sm"},r.a.createElement("div",{className:"movie-list"},this.state.movies.map((function(e){return r.a.createElement(P,{key:e.id,movie:e})})))))}}]),t}(n.PureComponent);function P(e){var t=e.movie;return r.a.createElement(m.b,{to:"/movies/".concat(t.id)},r.a.createElement(B,{movie:t}))}var I=a(382),W=a(388),z=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(N.a)(this,Object(A.a)(t).call(this,e))).fetchMovie=function(e){T.a.get("http://localhost:5000/api/movies/".concat(e)).then((function(e){a.setState({movie:e.data}),console.log("State",a.state),console.log("Props",a.props)})).catch((function(e){return console.log(e.response)}))},a.deleteMovie=function(e){try{T.a.delete("http://localhost:5000/api/movies/".concat(e)),window.location="/"}catch(t){console.log(t.message)}},a.saveMovie=function(){(0,a.props.addToSavedList)(a.state.movie)},a.state={movie:null},a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.fetchMovie(this.props.match.params.id),console.log("MATCH",this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.match.params.id!==e.match.params.id&&this.fetchMovie(e.match.params.id)}},{key:"render",value:function(){var e=this;return this.state.movie?r.a.createElement("div",{className:"save-wrapper"},r.a.createElement(q.a,null),r.a.createElement(R.a,{maxWidth:"sm"},r.a.createElement(B,{movie:this.state.movie}),r.a.createElement(I.a,{item:!0,container:!0,spacing:1},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(W.a,{display:"flex",justifyContent:"space-between"},r.a.createElement(I.a,{item:!0},r.a.createElement(u.a,{variant:"outlined",onClick:this.saveMovie,color:"primary"},"Save")),r.a.createElement(I.a,{item:!0},r.a.createElement(m.b,{to:{pathname:"/update-movie/".concat(this.props.match.params.id),state:{movie:this.state.movie}}},r.a.createElement(u.a,{variant:"contained",color:"primary"},"Update"))),r.a.createElement(I.a,{item:!0},r.a.createElement(u.a,{variant:"contained",color:"secondary",onClick:function(){return e.deleteMovie(e.state.movie.id)}},"Delete"))))))):r.a.createElement("div",null,"Loading movie information...")}}]),t}(r.a.Component),G=a(80),L=a.n(G),U=a(40),J=a(42),H=a(385),V=a(386),K=a(170),Q=a(387),X=Object(h.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{marginBottom:e.spacing(2),width:320}}})),Y=function(e){var t=e.label,a=Object(K.a)(e,["label"]),n=X(),c=Object(U.d)(a),o=Object(l.a)(c,2),i=o[0],s=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,Object.assign({error:s.error&&!0,helperText:s.touched&&s.error?s.error:null,label:t,className:"text-input ".concat(n.textField)},i,a)))},Z=a(384),$=a(103),_=a.n($),ee=a(383);var te=function(e){var t=e.values,a=e.name;return r.a.createElement(U.a,{name:a,render:function(e){return r.a.createElement("div",null,t.stars&&t.stars.length>0?t.stars.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(Y,{name:"stars.".concat(a),label:"Add Actor",InputProps:{endAdornment:r.a.createElement(ee.a,{position:"end"},r.a.createElement(p.a,{size:"small",color:"secondary","aria-label":"delete",onClick:function(){return e.remove(a)}},r.a.createElement(_.a,null)))}}))})):r.a.createElement(Y,{name:"stars.0",label:"Add Actor",InputProps:{endAdornment:r.a.createElement(ee.a,{position:"end"},r.a.createElement(p.a,{size:"small",color:"secondary","aria-label":"delete",onClick:function(){return e.remove(0)}},r.a.createElement(_.a,null)))}}),r.a.createElement(Z.a,{size:"small","aria-label":"Add Actor",variant:"extended",color:"secondary",onClick:function(){return e.push("")}},r.a.createElement(y.a,null),"Add an Actor"))}})},ae=Object(h.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),flexGrow:1}},card:{maxWidth:"min-content",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},marginBtns:{marginRight:e.spacing(1)},footerMargin:{marginTop:e.spacing(3),paddingTop:e.spacing(2),borderTop:"1px solid #f4f4f4"}}})),ne=function(e){var t=e.location,a=e.history,n=ae();return console.log("PROPS",a,t),r.a.createElement("div",{className:n.root},r.a.createElement(I.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:3},r.a.createElement(H.a,{className:n.card},r.a.createElement(V.a,{className:n.card},r.a.createElement(I.a,{item:!0},r.a.createElement(E.a,{variant:"h4",gutterBottom:!0},t.state?"Update Movie":"Add Movie")),r.a.createElement(I.a,{item:!0,container:!0},r.a.createElement(U.c,{initialValues:{id:t.state?t.state.movie.id:Date.now(),title:t.state?t.state.movie.title:"",director:t.state?t.state.movie.director:"",metascore:t.state?t.state.movie.metascore:"",stars:t.state?Object(i.a)(t.state.movie.stars):[]},validationSchema:J.object({title:J.string().max(30,"Must be 30 characters or less").required("Required"),director:J.string().max(30,"Must be 30 characters or less").required("Required"),metascore:J.number().min(0,"Muse be a number higher than 0").required("Required"),stars:J.array().of(J.string().max(30,"Must be 30 characters or less").required("At least one star name is Required."))}),onSubmit:function(e,n){var r,c,o,i;return L.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(r=n.setSubmitting,c=n.setErrors,o=n.setStatus,i=n.resetForm,l.prev=1,!t.state){l.next=7;break}return l.next=5,L.a.awrap(T.a.put("http://localhost:5000/api/movies/".concat(t.state.movie.id),e));case 5:l.next=9;break;case 7:return l.next=9,L.a.awrap(T.a.post("http://localhost:5000/api/movies/",e));case 9:i({}),o({success:!0}),a.replace(t.state?"/movies/".concat(t.state.movie.id):"/"),l.next=19;break;case 14:l.prev=14,l.t0=l.catch(1),o({success:!1}),r(!1),c({submit:l.t0.message});case 19:case"end":return l.stop()}}),null,null,[[1,14]])}},(function(e){var c=e.values;return r.a.createElement(U.b,null,r.a.createElement(Y,{label:"Movie Title",name:"title",type:"text",placeholder:"Movie Title..."}),r.a.createElement(Y,{label:"Movie Director",name:"director",type:"text",placeholder:"Movie Director..."}),r.a.createElement(Y,{label:"Metascore",name:"metascore",type:"text",placeholder:"Metascore..."}),r.a.createElement(te,{name:"stars",values:c}),r.a.createElement(I.a,{item:!0,container:!0,spacing:1,className:n.footerMargin},r.a.createElement(I.a,{item:!0},r.a.createElement(u.a,{variant:"contained",onClick:function(){return a.goBack()}},"Cancel")),r.a.createElement(I.a,{item:!0},r.a.createElement(u.a,{variant:"contained",color:"secondary",type:"submit"},t.state?"Update":"Submit"))))})))))))},re=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=function(e){c([].concat(Object(i.a)(a),[e]))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{list:a}),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/update-movie/:id?",render:function(e){return r.a.createElement(ne,e)}}),r.a.createElement(s.a,{path:"/add-movie/",render:function(e){return r.a.createElement(ne,e)}}),r.a.createElement(s.a,{path:"/movies/:id",render:function(e){return r.a.createElement(z,Object.assign({},e,{addToSavedList:o}))}}),r.a.createElement(s.a,{exact:!0,path:"/",component:F})))};o.a.render(r.a.createElement(m.a,null,r.a.createElement(re,null)),document.getElementById("root"))}},[[183,1,2]]]);
//# sourceMappingURL=main.49bf80c9.chunk.js.map